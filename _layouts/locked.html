<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§å¯†å†…å®¹ - å—å¯†ç ä¿æŠ¤</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background: #f9f9f9; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; color: #333; }
        .container { background: white; padding: 2.5rem; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); width: 100%; max-width: 400px; text-align: center; border: 1px solid #eaeaea; }
        h2 { margin-top: 0; color: #444; font-weight: 600; font-size: 1.5rem; }
        p { color: #666; font-size: 0.95rem; margin-bottom: 1.5rem; }
        input[type="password"] { width: 100%; padding: 14px; margin-bottom: 15px; border: 2px solid #eee; border-radius: 8px; font-size: 16px; outline: none; transition: all 0.2s; box-sizing: border-box; }
        input[type="password"]:focus { border-color: #0070f3; background: #f8fbff; }
        button { width: 100%; padding: 14px; background: #0070f3; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
        button:hover { background: #0051a2; }
        .error { color: #e00; font-size: 0.85rem; margin-top: 1rem; display: none; background: #fff0f0; padding: 10px; border-radius: 6px; }
        #content { display: none; text-align: left; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #eee; line-height: 1.8; }
        /* ç®€å•çš„ Markdown æ ·å¼æ¨¡æ‹Ÿ */
        #content h1, #content h2 { margin-top: 0; }
        #content code { background: #f3f3f3; padding: 2px 5px; border-radius: 4px; font-family: monospace; }
    </style>
</head>
<body>

<div class="container" id="login-card">
    <h2>ğŸ”’ å—é™è®¿é—®</h2>
    <p>æ­¤é¡µé¢å†…å®¹å·²åŠ å¯†ï¼Œè¯·è¾“å…¥å¯†é’¥æŸ¥çœ‹ã€‚</p>
    
    <input type="password" id="password" placeholder="è¯·è¾“å…¥ 16 ä½è®¿é—®å¯†é’¥" autofocus>
    <button onclick="unlock()">è§£ é”</button>
    
    <div id="error-msg" class="error"></div>
</div>

<div id="content" class="container" style="max-width: 800px; display: none;">
    </div>

<input type="hidden" id="iv-config" value="00000000000000000000000000000000">

<input type="hidden" id="ciphertext-config" value="è¯·åœ¨è¿™é‡Œç²˜è´´åŠ å¯†å·¥å…·ç”Ÿæˆçš„Base64å¯†æ–‡">

<script>
    function unlock() {
        const password = document.getElementById('password').value;
        const ivStr = document.getElementById('iv-config').value;
        const ciphertext = document.getElementById('ciphertext-config').value.trim();
        const errorEl = document.getElementById('error-msg');
        const loginCard = document.getElementById('login-card');
        const contentEl = document.getElementById('content');

        errorEl.style.display = 'none';
        errorEl.textContent = '';

        if (!password) {
            showError("è¯·è¾“å…¥å¯†é’¥");
            return;
        }

        try {
            // æ ¸å¿ƒé€»è¾‘ï¼šText æ¨¡å¼ (Utf8.parse)
            // å³ä½¿ ivStr æ˜¯ 32 ä¸ªå­—ç¬¦ï¼ŒCryptoJS åœ¨ Text æ¨¡å¼ä¸‹ä¼šæŒ‰å­—ç¬¦è§£æ
            // å¹¶åœ¨ AES å†…éƒ¨è‡ªåŠ¨å¤„ç†å—å¤§å°
            const key = CryptoJS.enc.Utf8.parse(password);
            const iv = CryptoJS.enc.Utf8.parse(ivStr);

            const decrypted = CryptoJS.AES.decrypt(ciphertext, key, {
                iv: iv,
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7
            });

            const result = decrypted.toString(CryptoJS.enc.Utf8);

            if (result && result.length > 0) {
                // è§£å¯†æˆåŠŸ
                loginCard.style.display = 'none'; // éšè—ç™»å½•æ¡†
                contentEl.innerHTML = result;     // æ³¨å…¥å†…å®¹
                contentEl.style.display = 'block'; // æ˜¾ç¤ºå†…å®¹æ¡†
            } else {
                throw new Error("è§£å¯†ç»“æœä¸ºç©º");
            }

        } catch (e) {
            console.error(e);
            showError("å¯†é’¥é”™è¯¯æˆ–å¯†æ–‡æŸåï¼Œè§£å¯†å¤±è´¥ã€‚");
            // å¯†ç æ¡†éœ‡åŠ¨æ•ˆæœ
            const input = document.getElementById('password');
            input.animate([
                { transform: 'translateX(0)' },
                { transform: 'translateX(-5px)' },
                { transform: 'translateX(5px)' },
                { transform: 'translateX(0)' }
            ], { duration: 300 });
        }
    }

    function showError(msg) {
        const el = document.getElementById('error-msg');
        el.textContent = msg;
        el.style.display = 'block';
    }

    // å›è½¦é”®æ”¯æŒ
    document.getElementById('password').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') unlock();
    });
</script>

</body>
</html>