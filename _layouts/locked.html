<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§å¯†ç¬”è®° (GitHub Safe)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding-top: 50px; }
        .card { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;}
        button { width: 100%; padding: 10px; background: #2ea44f; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;}
        button:hover { background: #2c974b; }
        #content { margin-top: 20px; padding: 15px; background: #fff9c4; border: 1px solid #fbc02d; display: none; word-wrap: break-word;}
        .error { color: red; font-size: 12px; display: none; margin-top: 5px;}
    </style>
</head>
<body>

<div class="card">
    <h2 style="text-align:center">ğŸ” å—é™è®¿é—®</h2>
    
    <label>è¯·è¾“å…¥è®¿é—®å¯†é’¥ (16ä½):</label>
    <input type="password" id="userKey" placeholder="åœ¨æ­¤è¾“å…¥å¯†é’¥...">
    <div id="errorMsg" class="error">è§£å¯†å¤±è´¥ï¼šå¯†é’¥é”™è¯¯æˆ–æ•°æ®æŸå</div>

    <button onclick="unlock()">æŸ¥çœ‹å†…å®¹</button>

    <input type="hidden" id="ciphertext" value="åœ¨æ­¤å¤„æ”¾å…¥ä½ çš„Base64å¯†æ–‡">

    <input type="hidden" id="iv" value="00000000000000000000000000000000">

    <div id="content"></div>
</div>

<script>
    function unlock() {
        var inputKey = document.getElementById('userKey').value;
        var ciphertext = document.getElementById('ciphertext').value; // æˆ–è€…ä»å¤–éƒ¨æ–‡ä»¶åŠ è½½
        var ivHex = document.getElementById('iv').value;
        var contentDiv = document.getElementById('content');
        var errorDiv = document.getElementById('errorMsg');

        // æ¸…ç©ºçŠ¶æ€
        contentDiv.style.display = 'none';
        errorDiv.style.display = 'none';

        try {
            if (inputKey.length !== 16) {
                throw new Error("å¯†é’¥é•¿åº¦å¿…é¡»ä¸º16å­—ç¬¦");
            }

            // ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„ Key
            var key = CryptoJS.enc.Utf8.parse(inputKey);
            var iv = CryptoJS.enc.Hex.parse(ivHex);

            var decrypted = CryptoJS.AES.decrypt(ciphertext, key, {
                iv: iv,
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7
            });

            var result = decrypted.toString(CryptoJS.enc.Utf8);

            if (!result) {
                throw new Error("Padding æ ¡éªŒå¤±è´¥");
            }

            // è§£å¯†æˆåŠŸï¼Œæ˜¾ç¤ºå†…å®¹
            contentDiv.innerHTML = result;
            contentDiv.style.display = 'block';

        } catch (e) {
            console.error(e);
            errorDiv.style.display = 'block';
            // ä¸ºäº†å®‰å…¨ï¼Œå¦‚æœå¤±è´¥å¯ä»¥æ¸…ç©ºè¾“å…¥æ¡†
            // document.getElementById('userKey').value = '';
        }
    }
</script>

</body>
</html>