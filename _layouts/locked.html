---
layout: default
---
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

<div class="post">
  <header class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>
    <p class="post-meta">{{ page.date | date: "%Y-%m-%d" }}</p>
  </header>

  <article class="post-content">
    <div id="lock-screen" style="text-align: center; padding: 40px 0; background: #f9f9f9; border-radius: 8px; border: 1px solid #eee;">
      <div style="font-size: 3em; margin-bottom: 20px;">ğŸ”’</div>
      <p style="color: #666;">æ­¤æ–‡ç« å†…å®¹å·²åŠ å¯†ï¼Œè¯·è¾“å…¥å¯†ç æŸ¥çœ‹ã€‚</p>
      
      <div style="margin-top: 20px;">
        <input type="password" id="password-input" placeholder="è¾“å…¥å¯†ç " 
               style="padding: 10px; border: 1px solid #ddd; border-radius: 4px; width: 200px;">
        <button onclick="decryptContent()" 
                style="padding: 10px 20px; background: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer;">
          è§£é”
        </button>
      </div>
      <p id="error-msg" style="color: red; margin-top: 10px; display: none;">å¯†ç é”™è¯¯ï¼Œè§£å¯†å¤±è´¥</p>
    </div>

    <div id="decoded-content" style="display: none; margin-top: 30px;"></div>
  </article>
</div>

<div id="ciphertext" style="display: none;">
  {{ content | strip_newlines }}
</div>

<script>
  function decryptContent() {
    var password = document.getElementById("password-input").value;
    var encryptedText = document.getElementById("ciphertext").innerText.trim();
    var errorMsg = document.getElementById("error-msg");

    try {
      // å°è¯•ä½¿ç”¨ AES è§£å¯†
      var bytes = CryptoJS.AES.decrypt(encryptedText, password);
      var originalText = bytes.toString(CryptoJS.enc.Utf8);

      if (originalText) {
        // è§£å¯†æˆåŠŸ
        document.getElementById("lock-screen").style.display = "none";
        document.getElementById("decoded-content").style.display = "block";
        document.getElementById("decoded-content").innerHTML = originalText;
      } else {
        // å¯†ç é”™è¯¯ï¼ˆè§£å¯†å‡ºç©ºå­—ç¬¦ä¸²ï¼‰
        throw new Error("Wrong Password");
      }
    } catch (e) {
      // å¯†ç é”™è¯¯
      errorMsg.style.display = "block";
      document.getElementById("password-input").value = "";
    }
  }

  // æ”¯æŒå›è½¦é”®æäº¤
  document.getElementById("password-input").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
      decryptContent();
    }
  });
</script>